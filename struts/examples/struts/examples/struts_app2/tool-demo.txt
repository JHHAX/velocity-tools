<html>
    <head>
	    <title>$msg.title</title>
	    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	    <base href="$link.baseRef">
    </head>

    <body>
        <h2>$msg.title (Velocity)</h2>
        <p>A demonstration of Struts context tools. Where available, the Velocity 
        shorthand notation to method calls is shown as well.</p>


        <h3>MessageTool</h3>
        <table border="1" cellspacing="0" cellpadding="4">
            <tr>
                <td>\$msg.get("title")<br>
                    \$msg.title</td>
                <td>$msg.get("title")</td>
            </tr>
            <tr>
                <td>\$msg.get("test", ["bear", "dog", "cat"])</td>
                <td>$msg.get("test", ["bear", "dog", "cat"])</td>
            </tr>
            <tr>
                <td>\$msg.exists("tutle")</td>
                <td>$msg.exists("tutle")</td>
            </tr>
            <tr>
            <tr>
                <td>\$msg.getLocale()<br>
                    \$msg.locale</td>
                <td>$msg.getLocale()</td>
            </tr>
        </table>


        <h3>ErrorsTool</h3>
        <table border="1" cellspacing="0" cellpadding="4">
            <tr>
                <td>\$errors.exist()</td>
                <td>$errors.exist()</td>
            </tr>
            <tr>
                <td>\$errors.getSize()<br>
                    \$errors.size</td>
                <td>$errors.getSize()</td>
            </tr>
            <tr>
                <td>\$errors.getSize("language")</td>
                <td>$errors.getSize("language")</td>
            </tr>
            <tr>
                <td>\$errors.getAll()<br>
                    \$errors.all</td>
                <td>$errors.getAll()</td>
            </tr>
            <tr>
                <td>\$errors.get("language")<br>
                    \$errors.language</td>
                <td>$errors.get("language")</td>
            </tr>
            <tr>
                <td>A Velocity macro to render all error messages:<br>
<pre><code>&#35;macro (errorMarkup)
    &#35;if (&#36;errors.exist)
        &lt;ul&gt;
        &#35;foreach (&#36;e in &#36;errors.all )
            &lt;li&gt;&#36;e&lt;/li&gt;
        &#35;end
        &lt;/ul&gt;
    &#35;end
&#35;end</code></pre>
                </td>
                <td>
                    #macro (errorMarkup)
                        #if ($errors.exist )
                            <ul>
                            #foreach ($e in $errors.all )
                                <li>$e</li>
                            #end
                            </ul>
                        #end
                    #end                    
                    #errorMarkup()
                </td>
            </tr>
            <tr>
                <td>A Velocity macro to render error messages specific to a property:<br>
<pre><code>&#35;macro (errorMarkup &#36;property)
    &#35;if (&#36;errors.exist(&#36;property))
        &lt;ul&gt;
        &#35;foreach (&#36;er in &#36;errors.get(&#36;property) )
            &lt;li&gt;&#36;er&lt;/li&gt;
        &#35;end
        &lt;/ul&gt;
    &#35;end
&#35;end</code></pre>
                </td>
                <td>
                    #macro (errorMarkup1 $property)
                        #if ($errors.exist($property) )
                            <ul>
                            #foreach ($er in $errors.get($property) )
                                <li>$er</li>
                            #end
                            </ul>
                        #end
                    #end                    
                    #errorMarkup1("language")
                </td>
            </tr>

        </table>


        <h3>FormTool</h3>
        <table border="1" cellspacing="0" cellpadding="4">
            <tr>
                <td>\$form.getBean()<br>
                    \$form.bean</td>
                <td>$form.getBean()</td>
            </tr>
            <tr>
                <td>\$form.getCancelName()<br>
                    \$form.cancelName</td>
                <td>$form.getCancelName()</td>
            </tr>
            <tr>
                <td>\$form.getTokenName()<br>
                    \$form.tokenName</td>
                <td>$form.getTokenName()</td>
            </tr>
            <tr>
                <td>\$form.getToken()<br>
                    \$form.token</td>
                <td>$form.getToken()</td>
            </tr>
        </table>


        <h3>LinkTool</h3>
        <table border="1" cellspacing="0" cellpadding="4">
            <tr>
                <td>\$link.setHref("template/login.vm")</td>
                <td>$link.setHref("template/login.vm")</td>
            </tr>
            <tr>
                <td>\$link.setAction("demo")</td>
                <td>$link.setAction("demo") &nbsp;</td>
            </tr>
            <tr>
                <td>\$link.setForward("start")</td>
                <td>$link.setForward("start") &nbsp;</td>
            </tr>
            <tr>
                <td>\$link.setAbsolute("examples/index.html")</td>
                <td>$link.setAbsolute("examples/index.html")</td>
            </tr>
            <tr>
                <td>\$link.setHref("index.html").addQueryData("key1", "val 1")</td>             
                <td>$link.setHref("index.html").addQueryData("key1", "val 1")</td>
            </tr>
            <tr>
                <td>\$link.setHref("index.html").addQueryData("key1", "val 1").getHref()<br>
                    \$link.setHref("index.html").addQueryData("key1", "val 1").href</td>             
                <td>$link.setHref("index.html").addQueryData("key1", "val 1").getHref()</td>
            </tr>
            <tr>
                <td>\$link.setHref("/index.html").addQueryData("key1", "val 1").getQueryData()<br>
                    \$link.setHref("/index.html").addQueryData("key1", "val 1").queryData</td>             
                <td>$link.setHref("/index.html").addQueryData("key1", "val 1").getQueryData()</td>
            </tr>
            <tr>
                <td>\$link.getContextURL()<br>
                    \$link.contextURL</td>
                <td>$link.getContextURL()</td>
            </tr>
            <tr>
                <td>\$link.getContextPath()<br>
                    \$link.contextPath</td>
                <td>$link.getContextPath()</td>
            </tr>
            <tr>
                <td>\$link.getBaseRef()<br>
                    \$link.baseRef</td>
                <td>$link.getBaseRef()</td>
            </tr>
            <tr>
                <td>\$link.setHref("index.vm").toString()</td>
                <td>$link.setHref("index.vm").toString()</td>
            </tr>
        </table>


        <h3>ActionMessagesTool</h3>
        <table border="1" cellspacing="0" cellpadding="4">
            <tr>
                <td>Pending. Depends on upcoming Struts 1.1 release.</td><td>&nbsp;</td>
            </tr>
        </table>



    </body>
</html>
